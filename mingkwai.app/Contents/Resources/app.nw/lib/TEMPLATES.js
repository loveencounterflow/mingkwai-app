// Generated by CoffeeScript 1.9.0
(function() {
  var ARTBOARD, BOTTOMMARGIN, BOX, BUTTON, CHASE, CHR, CND, COLUMN, CSS, GALLEY, HBOX, HGAP, HRIBBON, JS, LEFTMARGIN, OVERLAY, PAGE, PAPER, RIBBON, RIGHTMARGIN, TEACUP, TOOL, TOPMARGIN, VBOX, VGAP, VRIBBON, XHGAP, ZOOMER, alert, badge, debug, help, info, log, name_, njs_fs, njs_path, rpr, urge, warn, whisper,
    __slice = [].slice;

  njs_path = require('path');

  njs_fs = require('fs');

  CND = require('cnd');

  rpr = CND.rpr.bind(CND);

  badge = '眀快排字机/TEMPLATES';

  log = CND.get_logger('plain', badge);

  info = CND.get_logger('info', badge);

  whisper = CND.get_logger('whisper', badge);

  alert = CND.get_logger('alert', badge);

  debug = CND.get_logger('debug', badge);

  warn = CND.get_logger('warn', badge);

  help = CND.get_logger('help', badge);

  urge = CND.get_logger('urge', badge);

  TEACUP = require('coffeenode-teacup');

  CHR = require('coffeenode-chr');

  for (name_ in TEACUP) {
    eval("var " + name_ + " = TEACUP[ " + (rpr(name_)) + " ]");
  }

  ARTBOARD = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['artboard'].concat(__slice.call(p)));
  });

  PAGE = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['page'].concat(__slice.call(p)));
  });

  PAPER = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['paper'].concat(__slice.call(p)));
  });

  TOOL = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['tool'].concat(__slice.call(p)));
  });

  OVERLAY = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['overlay'].concat(__slice.call(p)));
  });


  /* JCH GUI */

  BOX = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['box'].concat(__slice.call(p)));
  });

  HBOX = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['hbox'].concat(__slice.call(p)));
  });

  VBOX = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['vbox'].concat(__slice.call(p)));
  });

  RIBBON = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['ribbon'].concat(__slice.call(p)));
  });

  HRIBBON = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['hribbon'].concat(__slice.call(p)));
  });

  VRIBBON = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['vribbon'].concat(__slice.call(p)));
  });

  ZOOMER = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['zoomer'].concat(__slice.call(p)));
  });

  COLUMN = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['column'].concat(__slice.call(p)));
  });

  VGAP = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['vgap'].concat(__slice.call(p)));
  });

  HGAP = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['hgap'].concat(__slice.call(p)));
  });

  XHGAP = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['xhgap'].concat(__slice.call(p)));
  });

  CHASE = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['chase'].concat(__slice.call(p)));
  });

  LEFTMARGIN = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['leftmargin'].concat(__slice.call(p)));
  });

  RIGHTMARGIN = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['rightmargin'].concat(__slice.call(p)));
  });

  TOPMARGIN = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['topmargin'].concat(__slice.call(p)));
  });

  BOTTOMMARGIN = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['bottommargin'].concat(__slice.call(p)));
  });


  /* WORKSPACE (IMPOSITION) */

  GALLEY = new_tag(function() {
    var p;
    p = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    return TAG.apply(null, ['galley'].concat(__slice.call(p)));
  });


  /* TAINT should be implemented using Polymer / Shadow DOM */

  BUTTON = function() {

    /* MaterializeCSS-compatible button */
    return A('.btn.waves-effect.waves-light', {
      href: '#'
    }, (function(_this) {
      return function() {
        TEXT("Demo");
        return I('.mdi-action-search.right');
      };
    })(this));
  };

  JS = new_tag(function(route) {
    return SCRIPT({
      type: 'text/javascript',
      src: route
    });
  });

  CSS = new_tag(function(route) {
    return LINK({
      rel: 'stylesheet',
      href: route
    });
  });

  this.font_test = function(app, md, settings, handler) {
    var n, triplets;
    n = 10;
    triplets = [[0x0061, 0x007a, 'u-latn'], [0x2e80, 0x2eff, 'u-cjk-rad2'], [0x2f00, 0x2fdf, 'u-cjk-rad1'], [0x3000, 0x303f, 'u-cjk-sym'], [0x31c0, 0x31ef, 'u-cjk-strk'], [0x3200, 0x32ff, 'u-cjk-enclett'], [0x3300, 0x33ff, 'u-cjk-cmp'], [0x3400, 0x4dbf, 'u-cjk-xa'], [0x4e00, 0x9fff, 'u-cjk'], [0xe000, 0xf8ff, 'jzr'], [0xf900, 0xfaff, 'u-cjk-cmpi1'], [0xfe30, 0xfe4f, 'u-cjk-cmpf'], [0x20000, 0x2b81f, 'u-cjk-xb'], [0x2a700, 0x2b73f, 'u-cjk-xc'], [0x2b740, 0x2b81f, 'u-cjk-xd'], [0x2f800, 0x2fa1f, 'u-cjk-cmpi2']];
    return render((function(_this) {
      return function() {
        DOCTYPE(5);
        return HTML(function() {
          HEAD(function() {
            META({
              charset: 'utf-8'
            });
            TITLE('mingkwai');
            LINK({
              rel: 'shortcut icon',
              href: './favicon.icon'
            });
            CSS('./html5doctor-css-reset.css');
            JS('./jquery-2.1.3.js');
            CSS('./jquery-ui-1.11.3.custom/jquery-ui.css');
            JS('./jquery-ui-1.11.3.custom/jquery-ui.js');
            JS('./jquery.event.drag-2.2/jquery.event.drag-2.2.js');
            JS('./outerHTML-2.1.0.js');
            JS('./blaidddrwg.js');
            JS('./jquery-transit.js');
            JS('./browser.js');
            JS('./process-xcss-rules.js');
            CSS('./materialize/css/materialize.css');
            JS('./materialize/js/materialize.min.js');
            return CSS('./mkts-main.css');
          });
          return BODY({
            style: "transform:scale(2);transform-origin:top left;"
          }, function() {
            var cid, rsg, _, _i, _len, _ref;
            H1(function() {
              return "Ligatures";
            });
            P(function() {
              TEXT("Standard Ligatures* (feature liga): fluffy, shy, official; ");
              return EM("gg, nagy, gjuha, Qyteti.");
            });
            H1(function() {
              return "Unicode Ranges";
            });
            DIV(function() {
              var cid, cids, _i, _j, _len, _ref, _ref1, _results, _results1;
              _ref1 = [
                (function() {
                  _results1 = [];
                  for (var _j = _ref = 0x2a6d6 - 9; _ref <= 0x2a6d6 ? _j <= 0x2a6d6 : _j >= 0x2a6d6; _ref <= 0x2a6d6 ? _j++ : _j--){ _results1.push(_j); }
                  return _results1;
                }).apply(this), [173824, 173825, 173826, 173827, 173828, 173829, 173830, 173831, 173832, 173833, 173834]
              ];
              _results = [];
              for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
                cids = _ref1[_i];
                _results.push((function() {
                  var _k, _len1, _results2;
                  _results2 = [];
                  for (_k = 0, _len1 = cids.length; _k < _len1; _k++) {
                    cid = cids[_k];
                    _results2.push(TEXT(CHR.as_uchr(cid)));
                  }
                  return _results2;
                })());
              }
              return _results;
            });
            for (_i = 0, _len = triplets.length; _i < _len; _i++) {
              _ref = triplets[_i], cid = _ref[0], _ = _ref[1], rsg = _ref[2];
              P(function() {
                SPAN(function() {
                  var i, _j, _results;
                  _results = [];
                  for (i = _j = 0; 0 <= n ? _j < n : _j > n; i = 0 <= n ? ++_j : --_j) {
                    _results.push(SPAN({
                      style: "display:inline-block;"
                    }, function() {
                      return CHR.as_uchr(cid + i);
                    }));
                  }
                  return _results;
                });
                return SPAN(function() {
                  return TEXT("(" + rsg + ")");
                });
              });
            }
            H1(function() {
              return "Other Stuff";
            });
            P({
              style: "font-family:'spincycle-eot','lastresort';"
            }, function() {
              SPAN(function() {
                return "一丁";
              });
              return SPAN(function() {
                return "abcdef (spincycle-eot)";
              });
            });
            P({
              style: "font-family:'spincycle-embedded-opentype','lastresort';"
            }, function() {
              SPAN(function() {
                return "一丁";
              });
              return SPAN(function() {
                return "abcdef (spincycle-embedded-opentype)";
              });
            });
            P({
              style: "font-family:'spincycle-woff2','lastresort';"
            }, function() {
              SPAN(function() {
                return "一丁";
              });
              return SPAN(function() {
                return "abcdef (spincycle-woff2)";
              });
            });
            P({
              style: "font-family:'spincycle-woff','lastresort';"
            }, function() {
              SPAN(function() {
                return "一丁";
              });
              return SPAN(function() {
                return "abcdef (spincycle-woff)";
              });
            });
            P({
              style: "font-family:'spincycle-truetype','lastresort';"
            }, function() {
              SPAN(function() {
                return "一丁";
              });
              return SPAN(function() {
                return "abcdef (spincycle-truetype)";
              });
            });
            P({
              style: "font-family:'spincycle-svg','lastresort';"
            }, function() {
              SPAN(function() {
                return "一丁";
              });
              return SPAN(function() {
                return "abcdef (spincycle-svg)";
              });
            });
            return P({
              style: "font-family:'lastresort';"
            }, function() {
              SPAN(function() {
                return "一丁";
              });
              return SPAN(function() {
                return "abcdef (lastresort)";
              });
            });
          });
        });
      };
    })(this));
  };

  this.test_page = function() {
    return render((function(_this) {
      return function() {
        DOCTYPE(5);
        return HTML(function() {
          HEAD(function() {
            META({
              charset: 'utf-8'
            });
            JS('./jquery-2.1.3.js');
            JS('./outerHTML-2.1.0.js');
            JS('./browser.js');
            STYLE('', "html, body {\n  margin:                 0;\n  padding:                0;\n}\n.gauge {\n  position:               absolute;\n  outline:                1px solid red;\n}");
            return COFFEESCRIPT(function() {
              return ($('document')).ready(function() {
                var d_npx, d_rpx, gauge, _i, _results;
                log = console.log.bind(console);
                gauge = $("<div id='meter-gauge' style='position:absolute;'></div>");
                ($('body')).append(gauge);
                _results = [];
                for (d_npx = _i = 1; _i <= 1000; d_npx = ++_i) {
                  gauge.css('height', d_npx + "px");
                  d_rpx = gauge[0].getBoundingClientRect()['height'];
                  _results.push(log(d_npx, d_rpx));
                }
                return _results;
              });
            });
          });
          return BODY(function() {});
        });
      };
    })(this));
  };

  this.splash_window = function() {
    return render((function(_this) {
      return function() {
        DOCTYPE(5);
        return HTML(function() {
          STYLE('', "body, html {\n  width:                    100%;\n  height:                   100%;\n  overflow:                 hidden;\n}\nbody {\n  width:                    100%;\n  height:                   100%;\n  background-color:         rgba( 255, 255, 255, 0.0 );\n  background-image:         url(./mingkwai-logo-circled.png);\n  background-size:          contain;\n  background-repeat:        no-repeat;\n  background-position:      50%;\n}");
          return BODY(function() {});
        });
      };
    })(this));
  };

  this.NORMAL_layout = function() {
    return render((function(_this) {
      return function() {
        DOCTYPE(5);
        return HTML(function() {
          HEAD(function() {
            META({
              charset: 'utf-8'
            });
            TITLE('mingkwai');
            LINK({
              rel: 'shortcut icon',
              href: './favicon.icon'
            });
            CSS('./html5doctor-css-reset.css');
            JS('./jquery-2.1.3.js');
            CSS('./jquery-ui-1.11.3.custom/jquery-ui.css');
            JS('./jquery-ui-1.11.3.custom/jquery-ui.js');
            JS('./jquery.event.drag-2.2/jquery.event.drag-2.2.js');
            JS('./outerHTML-2.1.0.js');
            JS('../node_modules/jquery-replace-text/jquery-replace-text.js');
            JS('./blaidddrwg.js');
            JS('./jquery-transit.js');
            JS('./browser.js');
            JS('./process-xcss-rules.js');
            CSS('./materialize/css/materialize.css');
            JS('./materialize/js/materialize.min.js');
            return CSS('./mkts-main.css');
          });
          COFFEESCRIPT(function() {
            return ($(document)).ready(function() {
              var dragging, page_x, page_y, scroll_x, scroll_y, shifted;
              window.zoomer = $('zoomer');
              scroll_x = null;
              scroll_y = null;
              page_x = null;
              page_y = null;
              dragging = false;
              shifted = false;
              return ($(document)).on('keyup keydown', function(event) {
                shifted = event.shiftKey;
                return true;
              });

              /* DRAGGING / HAND TOOL SUPPORT */
            });
          });
          return BODY(function() {
            A({
              style: "display:block;position:absolute;top:0;z-index:1000;",
              href: './font-test.html'
            }, function() {
              return "font-test";
            });
            TAG('push', {
              d: '0.4'
            }, function() {
              return TAG('raise', {
                d: '-0.1'
              });
            });
            ARTBOARD('.galley', function() {
              return ZOOMER(function() {
                return GALLEY(function() {
                  OVERLAY("Galley");
                  return CHASE(function() {
                    TOPMARGIN(function() {});
                    HBOX(function() {
                      LEFTMARGIN(function() {});
                      COLUMN(function() {});
                      VGAP(function() {});
                      COLUMN(function() {});
                      VGAP(function() {});
                      COLUMN(function() {});
                      return RIGHTMARGIN(function() {});
                    });
                    return BOTTOMMARGIN(function() {});
                  });
                });
              });
            });
            ARTBOARD('.pages', function() {
              return ZOOMER(function() {
                var page_nr, _i, _results;
                _results = [];
                for (page_nr = _i = 1; _i <= 5; page_nr = ++_i) {
                  _results.push(PAGE(function() {
                    OVERLAY(page_nr);
                    return CHASE(function() {
                      TOPMARGIN(function() {});
                      HBOX(function() {
                        LEFTMARGIN(function() {});
                        COLUMN(function() {});
                        VGAP(function() {});
                        COLUMN(function() {});
                        VGAP(function() {});
                        COLUMN(function() {});
                        return RIGHTMARGIN(function() {});
                      });
                      return BOTTOMMARGIN(function() {});
                    });
                  }));
                }
                return _results;
              });
            });
            return HRIBBON('.draggable', {
              style: 'height:20mm;'
            }, function() {
              I('.small.mkts-tool-hand', {
                action: 'tool-mode-hand'
              });
              I('.small.mdi-editor-insert-chart', {
                action: 'editor-insert-chart'
              });
              I('.small.mdi-action-3d-rotation', {
                action: 'action-3d-rotation'
              });
              I('.small.mdi-action-assignment', {
                action: 'action-assignment'
              });
              I('.small.mdi-image-blur-on', {
                action: 'image-blur-on'
              });
              I('.small.mdi-action-print', {
                action: 'action-print'
              });
              I('.small.mdi-action-cached', {
                action: 'action-cached'
              });
              I('.small.mdi-content-content-cut', {
                action: 'content-content-cut'
              });
              return I('.small.mdi-content-content-copy', {
                action: 'content-content-copy'
              });
            });
          });
        });
      };
    })(this));
  };


  /*  * # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # */


  /*  * # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # */


  /*  * # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # */


  /*  * # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # */


  /*  * # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # */


  /*  * # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # */


  /*  * # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # */


  /*  * # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # */


  /* just for testing of CSS @font-face, unicode-range */

  this.TEST_layout = function() {
    return render((function(_this) {
      return function() {
        DOCTYPE(5);
        return HTML(function() {
          HEAD(function() {
            META({
              charset: 'utf-8'
            });
            TITLE('mingkwai');
            LINK({
              rel: 'shortcut icon',
              href: './favicon.icon'
            });
            CSS('./html5doctor-css-reset.css');
            JS('./jquery-2.1.3.js');
            CSS('./jquery-ui-1.11.3.custom/jquery-ui.css');
            JS('./jquery-ui-1.11.3.custom/jquery-ui.js');
            JS('./jquery.event.drag-2.2/jquery.event.drag-2.2.js');
            JS('./outerHTML-2.1.0.js');
            JS('./blaidddrwg.js');
            JS('./jquery-transit.js');
            JS('./browser.js');
            CSS('./materialize/css/materialize.css');
            JS('./materialize/js/materialize.min.js');
            CSS('./mkts-main.css');
            return STYLE("@font-face {\n  font-family:    'ampersand';\n  src:            local('Schwabacher');\n  unicode-range:  U+0026;\n}\n\n@font-face {\n  font-family:    'cjk';\n  src:            local('Sun-ExtA');\n  unicode-range:  U+4e00-9fff;\n}\n\n@font-face {\n  font-family:    'cjk';\n  src:            local('sunflower-u-cjk-xb');\n  unicode-range:  U+20000-2b81f;\n}\n\n@font-face {\n  font-family:    'cjk';\n  src:            local('jizura3b');\n  unicode-range:  U+e000-f8ff;\n}\n\n@font-face {\n  font-family:    'ancientsymbols';\n  src:            local('Geneva');\n  unicode-range:  U+10190-1019B;\n}\n\nbody, html {\n  font-family:    'ampersand', 'cjk', 'ancientsymbols', 'Source Code Pro';\n}\n\n");
          });
          return BODY(function() {
            return RAW("<div>&amp;</div>\n<div>𐆓</div>\n<div>一丁丂七丄丅丆万丈三 u-cjk</div>\n<div>𠀀𠀁𠀂𠀃𠀄𠀅𠀆𠀇𠀈𠀉 u-cjk-xb</div>\n<div> jzr</div>");
          });
        });
      };
    })(this));
  };

  this.layout = this.TEST_layout;

  this.layout = this.NORMAL_layout;

}).call(this);
