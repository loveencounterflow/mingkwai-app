(function() {
  var BD;

  window['BD'] = BD = {};

  BD._dom_from_hint = function(hint) {
    return hint.get(0);
  };


  /* `CS`: Computed Style */

  BD._number_from_cs = function(dom, cs_name) {
    return parseFloat(getComputedStyle(dom)[cs_name]);
  };

  BD.CSS = {};

  BD.css = (function(_this) {
    return function(hint, cs_name) {
      return BD._number_from_cs(BD._dom_from_hint(hint), cs_name);
    };
  })(this);

  BD.get_rectangle = (function(_this) {
    return function(hint, key) {
      var R;
      if (key == null) {
        key = null;
      }
      R = (BD._dom_from_hint(hint)).getBoundingClientRect();
      if (key != null) {
        return R[key];
      } else {
        return R;
      }
    };
  })(this);


  /* Now avaliable as `npm install jquery-replace-text`:
  
  #-----------------------------------------------------------------------------------------------------------
  $.fn.text_nodes = ->
     * http://refactormycode.com/codes/341-jquery-all-descendent-text-nodes-within-a-node
    R = []
    @each ->
      fn = arguments.callee
      ( $ @ ).contents().each ->
        if @nodeType == 3
          R.push @
        else
          fn.apply $ @
    return $ R
  
  #-----------------------------------------------------------------------------------------------------------
  $.fn.replace_text = ( matcher, replacement, is_raw = no ) ->
    to_be_removed = if is_raw then null else []
    @text_nodes().each ( idx ) ->
      if ( new_value = @nodeValue.replace matcher, replacement ) isnt @nodeValue
        if not is_raw and '<' in new_value
          ( $ @ ).before new_value
          to_be_removed.push @
        else
          @nodeValue = new_value
      ( $ to_be_removed ).remove() if not is_raw and to_be_removed.length > 0
   */

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkJMQUlERERSV0cuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQThEQTtBQUFBLE1BQUE7O0VBQUEsTUFBUSxDQUFBLElBQUEsQ0FBUixHQUFpQixFQUFBLEdBQUs7O0VBR3RCLEVBQUUsQ0FBQyxjQUFILEdBQXNCLFNBQUUsSUFBRjtXQUFZLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBVDtFQUFaOzs7QUFDdEI7O0VBQ0EsRUFBRSxDQUFDLGVBQUgsR0FBc0IsU0FBRSxHQUFGLEVBQU8sT0FBUDtXQUFvQixVQUFBLENBQVcsZ0JBQUEsQ0FBa0IsR0FBbEIsQ0FBeUIsQ0FBQSxPQUFBLENBQXBDO0VBQXBCOztFQUd0QixFQUFFLENBQUMsR0FBSCxHQUFTOztFQUdULEVBQUUsQ0FBQyxHQUFILEdBQVMsQ0FBQSxTQUFBLEtBQUE7V0FBQSxTQUFFLElBQUYsRUFBUSxPQUFSO2FBQXFCLEVBQUUsQ0FBQyxlQUFILENBQXFCLEVBQUUsQ0FBQyxjQUFILENBQWtCLElBQWxCLENBQXJCLEVBQStDLE9BQS9DO0lBQXJCO0VBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQTs7RUFHVCxFQUFFLENBQUMsYUFBSCxHQUFtQixDQUFBLFNBQUEsS0FBQTtXQUFBLFNBQUUsSUFBRixFQUFRLEdBQVI7QUFDakIsVUFBQTs7UUFEeUIsTUFBTTs7TUFDL0IsQ0FBQSxHQUFRLENBQUUsRUFBRSxDQUFDLGNBQUgsQ0FBa0IsSUFBbEIsQ0FBRixDQUEwQixDQUFDLHFCQUEzQixDQUFBO01BQ0QsSUFBRyxXQUFIO2VBQWEsQ0FBRyxDQUFBLEdBQUEsRUFBaEI7T0FBQSxNQUFBO2VBQTJCLEVBQTNCOztJQUZVO0VBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQTs7O0FBSW5COzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFsQkEiLCJmaWxlIjoiQkxBSURERFJXRy5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG5cblxuXG5cbiMgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4jIEJELnN0eWxlX29mID0gKCBlbGVtZW50ICkgLT4gd2luZG93LmdldENvbXB1dGVkU3R5bGUgZWxlbWVudC5nZXQgMFxuIyBCRC5ib3hfb2YgICA9ICggZWxlbWVudCApIC0+ICggZWxlbWVudC5nZXQgMCApLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cbiMgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4jIEJELmhlaWdodF9vZiA9ICggZWxlbWVudCApIC0+XG4jICAgIyMjIGpRdWVyeSByb3VuZHMgdG8gaW50ZWdlciBwaXhlbHM7IHRoaXMgaXMgbW9yZSBwcmVjaXNlLiAjIyNcbiMgICAjIyMgVEFJTlQgYWxnb3JpdGhtIG5vdCByZWFsbHkgdGVzdGVkOyBkaXNjcmVwZW5jaWVzIHRvIGpRdWVyeSAoYXBhcnQgZnJvbSBmbG9hdGluZyBwb2ludCBpc3N1ZSkgYXJlIGtub3duICMjI1xuIyAgIHN0eWxlICAgPSBAc3R5bGVfb2YgZWxlbWVudFxuIyAgIGhlaWdodCAgPSBwYXJzZUZsb2F0IHN0eWxlWyAnaGVpZ2h0JyBdXG4jICAgdW5sZXNzIGlzRmluaXRlIGhlaWdodFxuIyAgICAgaGVpZ2h0ID0gKCBAYm94X29mIGVsZW1lbnQgKVsgJ2hlaWdodCcgXVxuIyAgIHJldHVybiBoZWlnaHQgXFxcbiMgICAgIC0gKCBwYXJzZUZsb2F0IHN0eWxlWyAnYm9yZGVyLXRvcC13aWR0aCcgICAgXSApIFxcXG4jICAgICAtICggcGFyc2VGbG9hdCBzdHlsZVsgJ2JvcmRlci1ib3R0b20td2lkdGgnIF0gKSBcXFxuIyAgICAgLSAoIHBhcnNlRmxvYXQgc3R5bGVbICdtYXJnaW4tdG9wJyAgICAgICAgICBdICkgXFxcbiMgICAgIC0gKCBwYXJzZUZsb2F0IHN0eWxlWyAnbWFyZ2luLWJvdHRvbScgICAgICAgXSApIFxcXG4jICAgICAtICggcGFyc2VGbG9hdCBzdHlsZVsgJ3BhZGRpbmctdG9wJyAgICAgICAgIF0gKSBcXFxuIyAgICAgLSAoIHBhcnNlRmxvYXQgc3R5bGVbICdwYWRkaW5nLWJvdHRvbScgICAgICBdIClcblxuIyAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiMgQkQud2lkdGhfb2YgPSAoIGVsZW1lbnQgKSAtPlxuIyAgICMjIyBqUXVlcnkgcm91bmRzIHRvIGludGVnZXIgcGl4ZWxzOyB0aGlzIGlzIG1vcmUgcHJlY2lzZS4gIyMjXG4jICAgIyMjIFRBSU5UIGFsZ29yaXRobSBub3QgcmVhbGx5IHRlc3RlZDsgZGlzY3JlcGVuY2llcyB0byBqUXVlcnkgKGFwYXJ0IGZyb20gZmxvYXRpbmcgcG9pbnQgaXNzdWUpIGFyZSBrbm93biAjIyNcbiMgICBzdHlsZSAgID0gQHN0eWxlX29mIGVsZW1lbnRcbiMgICBoZWlnaHQgID0gcGFyc2VGbG9hdCBzdHlsZVsgJ3dpZHRoJyBdXG4jICAgdW5sZXNzIGlzRmluaXRlIHdpZHRoXG4jICAgICB3aWR0aCA9ICggQGJveF9vZiBlbGVtZW50IClbICd3aWR0aCcgXVxuIyAgIHJldHVybiB3aWR0aCBcXFxuIyAgICAgLSAoIHBhcnNlRmxvYXQgc3R5bGVbICdib3JkZXItbGVmdC13aWR0aCcgICBdICkgXFxcbiMgICAgIC0gKCBwYXJzZUZsb2F0IHN0eWxlWyAnYm9yZGVyLXJpZ2h0LXdpZHRoJyAgXSApIFxcXG4jICAgICAtICggcGFyc2VGbG9hdCBzdHlsZVsgJ21hcmdpbi1sZWZ0JyAgICAgICAgIF0gKSBcXFxuIyAgICAgLSAoIHBhcnNlRmxvYXQgc3R5bGVbICdtYXJnaW4tcmlnaHQnICAgICAgICBdICkgXFxcbiMgICAgIC0gKCBwYXJzZUZsb2F0IHN0eWxlWyAncGFkZGluZy1sZWZ0JyAgICAgICAgXSApIFxcXG4jICAgICAtICggcGFyc2VGbG9hdCBzdHlsZVsgJ3BhZGRpbmctcmlnaHQnICAgICAgIF0gKVxuXG4jICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIyBCRC50b3Bfb2YgPSAoIGVsZW1lbnQsIHkgPSBudWxsICkgLT5cbiMgICByZXR1cm4gKCB5ID8gd2luZG93LnNjcm9sbFkgKSArICggQGJveF9vZiBlbGVtZW50IClbICd0b3AnIF1cblxuIyAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiMgQkQuYm90dG9tX29mID0gKCBlbGVtZW50LCB5ID0gbnVsbCApIC0+XG4jICAgcmV0dXJuICggQHRvcF9vZiBlbGVtZW50LCB5ICkgKyBAaGVpZ2h0X29mIGVsZW1lbnRcblxuIyAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiMgQkQucmVsYXRpdmVfdG9wX29mID0gKCBlbGVtZW50LCBzZWxlY3RvciwgeSA9IG51bGwgKSAtPlxuIyAgIHJldHVybiAoIEB0b3Bfb2YgZWxlbWVudCwgeSApIC0gKCBAdG9wX29mIGVsZW1lbnQucGFyZW50cyBzZWxlY3RvciwgeSApXG5cbiMgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4jIEJELnJlbGF0aXZlX2JvdHRvbV9vZiA9ICggZWxlbWVudCwgc2VsZWN0b3IsIHkgPSBudWxsICkgLT5cbiMgICByZXR1cm4gKCBAcmVsYXRpdmVfdG9wX29mIGVsZW1lbnQsIHNlbGVjdG9yLCB5ICkgKyBAaGVpZ2h0X29mIGVsZW1lbnRcblxuXG4jICMgQkQueF9oZWlnaHRfb2YgPSAoIGVsZW1lbnQgKSAtPiBAaGVpZ2h0X29mIGVsZW1lbnRcblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG53aW5kb3dbICdCRCcgXSA9IEJEID0ge31cblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5CRC5fZG9tX2Zyb21faGludCAgID0gKCBoaW50ICkgLT4gaGludC5nZXQgMFxuIyMjIGBDU2A6IENvbXB1dGVkIFN0eWxlICMjI1xuQkQuX251bWJlcl9mcm9tX2NzICA9ICggZG9tLCBjc19uYW1lICkgLT4gcGFyc2VGbG9hdCBnZXRDb21wdXRlZFN0eWxlKCBkb20gKVsgY3NfbmFtZSBdXG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQkQuQ1NTID0ge31cblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5CRC5jc3MgPSAoIGhpbnQsIGNzX25hbWUgKSA9PiBCRC5fbnVtYmVyX2Zyb21fY3MgKCBCRC5fZG9tX2Zyb21faGludCBoaW50ICksIGNzX25hbWVcblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5CRC5nZXRfcmVjdGFuZ2xlID0gKCBoaW50LCBrZXkgPSBudWxsICkgPT5cbiAgUiAgICAgPSAoIEJELl9kb21fZnJvbV9oaW50IGhpbnQgKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICByZXR1cm4gaWYga2V5PyB0aGVuIFJbIGtleSBdIGVsc2UgUlxuXG4jIyMgTm93IGF2YWxpYWJsZSBhcyBgbnBtIGluc3RhbGwganF1ZXJ5LXJlcGxhY2UtdGV4dGA6XG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuJC5mbi50ZXh0X25vZGVzID0gLT5cbiAgIyBodHRwOi8vcmVmYWN0b3JteWNvZGUuY29tL2NvZGVzLzM0MS1qcXVlcnktYWxsLWRlc2NlbmRlbnQtdGV4dC1ub2Rlcy13aXRoaW4tYS1ub2RlXG4gIFIgPSBbXVxuICBAZWFjaCAtPlxuICAgIGZuID0gYXJndW1lbnRzLmNhbGxlZVxuICAgICggJCBAICkuY29udGVudHMoKS5lYWNoIC0+XG4gICAgICBpZiBAbm9kZVR5cGUgPT0gM1xuICAgICAgICBSLnB1c2ggQFxuICAgICAgZWxzZVxuICAgICAgICBmbi5hcHBseSAkIEBcbiAgcmV0dXJuICQgUlxuXG4jLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiQuZm4ucmVwbGFjZV90ZXh0ID0gKCBtYXRjaGVyLCByZXBsYWNlbWVudCwgaXNfcmF3ID0gbm8gKSAtPlxuICB0b19iZV9yZW1vdmVkID0gaWYgaXNfcmF3IHRoZW4gbnVsbCBlbHNlIFtdXG4gIEB0ZXh0X25vZGVzKCkuZWFjaCAoIGlkeCApIC0+XG4gICAgaWYgKCBuZXdfdmFsdWUgPSBAbm9kZVZhbHVlLnJlcGxhY2UgbWF0Y2hlciwgcmVwbGFjZW1lbnQgKSBpc250IEBub2RlVmFsdWVcbiAgICAgIGlmIG5vdCBpc19yYXcgYW5kICc8JyBpbiBuZXdfdmFsdWVcbiAgICAgICAgKCAkIEAgKS5iZWZvcmUgbmV3X3ZhbHVlXG4gICAgICAgIHRvX2JlX3JlbW92ZWQucHVzaCBAXG4gICAgICBlbHNlXG4gICAgICAgIEBub2RlVmFsdWUgPSBuZXdfdmFsdWVcbiAgICAoICQgdG9fYmVfcmVtb3ZlZCApLnJlbW92ZSgpIGlmIG5vdCBpc19yYXcgYW5kIHRvX2JlX3JlbW92ZWQubGVuZ3RoID4gMFxuIyMjXG5cbiMgYFxuXG4jIC8qIVxuIyAgKiBqUXVlcnkgcmVwbGFjZVRleHQgLSB2MS4xIC0gMTEvMjEvMjAwOVxuIyAgKiBodHRwOi8vYmVuYWxtYW4uY29tL3Byb2plY3RzL2pxdWVyeS1yZXBsYWNldGV4dC1wbHVnaW4vXG4jICAqXG4jICAqIENvcHlyaWdodCAoYykgMjAwOSBcIkNvd2JveVwiIEJlbiBBbG1hblxuIyAgKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy5cbiMgICogaHR0cDovL2JlbmFsbWFuLmNvbS9hYm91dC9saWNlbnNlL1xuIyAgKiAvXG5cbiMgLy8gaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2Nvd2JveS9qcXVlcnktcmVwbGFjZXRleHQvbWFzdGVyL2pxdWVyeS5iYS1yZXBsYWNldGV4dC5qc1xuXG4jIC8vIFNjcmlwdDogalF1ZXJ5IHJlcGxhY2VUZXh0OiBTdHJpbmcgcmVwbGFjZSBmb3IgeW91ciBqUXVlcmllcyFcbiMgLy9cbiMgLy8gKlZlcnNpb246IDEuMSwgTGFzdCB1cGRhdGVkOiAxMS8yMS8yMDA5KlxuIyAvL1xuIyAvLyBQcm9qZWN0IEhvbWUgLSBodHRwOi8vYmVuYWxtYW4uY29tL3Byb2plY3RzL2pxdWVyeS1yZXBsYWNldGV4dC1wbHVnaW4vXG4jIC8vIEdpdEh1YiAgICAgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktcmVwbGFjZXRleHQvXG4jIC8vIFNvdXJjZSAgICAgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktcmVwbGFjZXRleHQvcmF3L21hc3Rlci9qcXVlcnkuYmEtcmVwbGFjZXRleHQuanNcbiMgLy8gKE1pbmlmaWVkKSAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS1yZXBsYWNldGV4dC9yYXcvbWFzdGVyL2pxdWVyeS5iYS1yZXBsYWNldGV4dC5taW4uanMgKDAuNWtiKVxuIyAvL1xuIyAvLyBBYm91dDogTGljZW5zZVxuIyAvL1xuIyAvLyBDb3B5cmlnaHQgKGMpIDIwMDkgXCJDb3dib3lcIiBCZW4gQWxtYW4sXG4jIC8vIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzLlxuIyAvLyBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvXG4jIC8vXG4jIC8vIEFib3V0OiBFeGFtcGxlc1xuIyAvL1xuIyAvLyBUaGlzIHdvcmtpbmcgZXhhbXBsZSwgY29tcGxldGUgd2l0aCBmdWxseSBjb21tZW50ZWQgY29kZSwgaWxsdXN0cmF0ZXMgb25lIHdheVxuIyAvLyBpbiB3aGljaCB0aGlzIHBsdWdpbiBjYW4gYmUgdXNlZC5cbiMgLy9cbiMgLy8gcmVwbGFjZVRleHQgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LXJlcGxhY2V0ZXh0L2V4YW1wbGVzL3JlcGxhY2V0ZXh0L1xuIyAvL1xuIyAvLyBBYm91dDogU3VwcG9ydCBhbmQgVGVzdGluZ1xuIyAvL1xuIyAvLyBJbmZvcm1hdGlvbiBhYm91dCB3aGF0IHZlcnNpb24gb3IgdmVyc2lvbnMgb2YgalF1ZXJ5IHRoaXMgcGx1Z2luIGhhcyBiZWVuXG4jIC8vIHRlc3RlZCB3aXRoLCBhbmQgd2hhdCBicm93c2VycyBpdCBoYXMgYmVlbiB0ZXN0ZWQgaW4uXG4jIC8vXG4jIC8vIGpRdWVyeSBWZXJzaW9ucyAtIDEuMy4yLCAxLjQuMVxuIyAvLyBCcm93c2VycyBUZXN0ZWQgLSBJbnRlcm5ldCBFeHBsb3JlciA2LTgsIEZpcmVmb3ggMi0zLjYsIFNhZmFyaSAzLTQsIENocm9tZSwgT3BlcmEgOS42LTEwLjEuXG4jIC8vXG4jIC8vIEFib3V0OiBSZWxlYXNlIEhpc3RvcnlcbiMgLy9cbiMgLy8gMS4xIC0gKDExLzIxLzIwMDkpIFNpbXBsaWZpZWQgdGhlIGNvZGUgYW5kIEFQSSBzdWJzdGFudGlhbGx5LlxuIyAvLyAxLjAgLSAoMTEvMjEvMjAwOSkgSW5pdGlhbCByZWxlYXNlXG5cbiMgKGZ1bmN0aW9uKCQpe1xuIyAgICckOm5vbXVuZ2UnOyAvLyBVc2VkIGJ5IFlVSSBjb21wcmVzc29yLlxuXG4jICAgLy8gTWV0aG9kOiBqUXVlcnkuZm4ucmVwbGFjZVRleHRcbiMgICAvL1xuIyAgIC8vIFJlcGxhY2UgdGV4dCBpbiBzcGVjaWZpZWQgZWxlbWVudHMuIE5vdGUgdGhhdCBvbmx5IHRleHQgY29udGVudCB3aWxsIGJlXG4jICAgLy8gbW9kaWZpZWQsIGxlYXZpbmcgYWxsIHRhZ3MgYW5kIGF0dHJpYnV0ZXMgdW50b3VjaGVkLiBUaGUgbmV3IHRleHQgY2FuIGJlXG4jICAgLy8gZWl0aGVyIHRleHQgb3IgSFRNTC5cbiMgICAvL1xuIyAgIC8vIFVzZXMgdGhlIFN0cmluZyBwcm90b3R5cGUgcmVwbGFjZSBtZXRob2QsIGZ1bGwgZG9jdW1lbnRhdGlvbiBvbiB0aGF0IG1ldGhvZFxuIyAgIC8vIGNhbiBiZSBmb3VuZCBoZXJlOlxuIyAgIC8vXG4jICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvRW4vQ29yZV9KYXZhU2NyaXB0XzEuNV9SZWZlcmVuY2UvT2JqZWN0cy9TdHJpbmcvUmVwbGFjZVxuIyAgIC8vXG4jICAgLy8gVXNhZ2U6XG4jICAgLy9cbiMgICAvLyA+IGpRdWVyeSgnc2VsZWN0b3InKS5yZXBsYWNlVGV4dCggc2VhcmNoLCByZXBsYWNlIFssIHRleHRfb25seSBdICk7XG4jICAgLy9cbiMgICAvLyBBcmd1bWVudHM6XG4jICAgLy9cbiMgICAvLyAgc2VhcmNoIC0gKFJlZ0V4cHxTdHJpbmcpIEEgUmVnRXhwIG9iamVjdCBvciBzdWJzdHJpbmcgdG8gYmUgcmVwbGFjZWQuXG4jICAgLy8gICAgQmVjYXVzZSB0aGUgU3RyaW5nIHByb3RvdHlwZSByZXBsYWNlIG1ldGhvZCBpcyB1c2VkIGludGVybmFsbHksIHRoaXNcbiMgICAvLyAgICBhcmd1bWVudCBzaG91bGQgYmUgc3BlY2lmaWVkIGFjY29yZGluZ2x5LlxuIyAgIC8vICByZXBsYWNlIC0gKFN0cmluZ3xGdW5jdGlvbikgVGhlIFN0cmluZyB0aGF0IHJlcGxhY2VzIHRoZSBzdWJzdHJpbmcgcmVjZWl2ZWRcbiMgICAvLyAgICBmcm9tIHRoZSBzZWFyY2ggYXJndW1lbnQsIG9yIGEgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCB0byBjcmVhdGUgdGhlIG5ld1xuIyAgIC8vICAgIHN1YnN0cmluZy4gQmVjYXVzZSB0aGUgU3RyaW5nIHByb3RvdHlwZSByZXBsYWNlIG1ldGhvZCBpcyB1c2VkIGludGVybmFsbHksXG4jICAgLy8gICAgdGhpcyBhcmd1bWVudCBzaG91bGQgYmUgc3BlY2lmaWVkIGFjY29yZGluZ2x5LlxuIyAgIC8vICB0ZXh0X29ubHkgLSAoQm9vbGVhbikgSWYgdHJ1ZSwgYW55IEhUTUwgd2lsbCBiZSByZW5kZXJlZCBhcyB0ZXh0LiBEZWZhdWx0c1xuIyAgIC8vICAgIHRvIGZhbHNlLlxuIyAgIC8vXG4jICAgLy8gUmV0dXJuczpcbiMgICAvL1xuIyAgIC8vICAoalF1ZXJ5KSBUaGUgaW5pdGlhbCBqUXVlcnkgY29sbGVjdGlvbiBvZiBlbGVtZW50cy5cblxuIyAgICQuZm4ucmVwbGFjZV90ZXh0ID0gZnVuY3Rpb24oIHNlYXJjaCwgcmVwbGFjZSwgdGV4dF9vbmx5ICkge1xuIyAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuIyAgICAgICB2YXIgbm9kZSA9IHRoaXMuZmlyc3RDaGlsZCxcbiMgICAgICAgICB2YWwsXG4jICAgICAgICAgbmV3X3ZhbCxcblxuIyAgICAgICAgIC8vIEVsZW1lbnRzIHRvIGJlIHJlbW92ZWQgYXQgdGhlIGVuZC5cbiMgICAgICAgICByZW1vdmUgPSBbXTtcblxuIyAgICAgICAvLyBPbmx5IGNvbnRpbnVlIGlmIGZpcnN0Q2hpbGQgZXhpc3RzLlxuIyAgICAgICBpZiAoIG5vZGUgKSB7XG5cbiMgICAgICAgICAvLyBMb29wIG92ZXIgYWxsIGNoaWxkTm9kZXMuXG4jICAgICAgICAgZG8ge1xuXG4jICAgICAgICAgICAvLyBPbmx5IHByb2Nlc3MgdGV4dCBub2Rlcy5cbiMgICAgICAgICAgIGlmICggbm9kZS5ub2RlVHlwZSA9PT0gMyApIHtcblxuIyAgICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgbm9kZSB2YWx1ZS5cbiMgICAgICAgICAgICAgdmFsID0gbm9kZS5ub2RlVmFsdWU7XG5cbiMgICAgICAgICAgICAgLy8gVGhlIG5ldyB2YWx1ZS5cbiMgICAgICAgICAgICAgbmV3X3ZhbCA9IHZhbC5yZXBsYWNlKCBzZWFyY2gsIHJlcGxhY2UgKTtcblxuIyAgICAgICAgICAgICAvLyBPbmx5IHJlcGxhY2UgdGV4dCBpZiB0aGUgbmV3IHZhbHVlIGlzIGFjdHVhbGx5IGRpZmZlcmVudCFcbiMgICAgICAgICAgICAgaWYgKCBuZXdfdmFsICE9PSB2YWwgKSB7XG5cbiMgICAgICAgICAgICAgICBpZiAoICF0ZXh0X29ubHkgJiYgLzwvLnRlc3QoIG5ld192YWwgKSApIHtcbiMgICAgICAgICAgICAgICAgIC8vIFRoZSBuZXcgdmFsdWUgY29udGFpbnMgSFRNTCwgc2V0IGl0IGluIGEgc2xvd2VyIGJ1dCBmYXIgbW9yZVxuIyAgICAgICAgICAgICAgICAgLy8gcm9idXN0IHdheS5cbiMgICAgICAgICAgICAgICAgICQobm9kZSkuYmVmb3JlKCBuZXdfdmFsICk7XG5cbiMgICAgICAgICAgICAgICAgIC8vIERvbid0IHJlbW92ZSB0aGUgbm9kZSB5ZXQsIG9yIHRoZSBsb29wIHdpbGwgbG9zZSBpdHMgcGxhY2UuXG4jICAgICAgICAgICAgICAgICByZW1vdmUucHVzaCggbm9kZSApO1xuIyAgICAgICAgICAgICAgIH0gZWxzZSB7XG4jICAgICAgICAgICAgICAgICAvLyBUaGUgbmV3IHZhbHVlIGNvbnRhaW5zIG5vIEhUTUwsIHNvIGl0IGNhbiBiZSBzZXQgaW4gdGhpc1xuIyAgICAgICAgICAgICAgICAgLy8gdmVyeSBmYXN0LCBzaW1wbGUgd2F5LlxuIyAgICAgICAgICAgICAgICAgbm9kZS5ub2RlVmFsdWUgPSBuZXdfdmFsO1xuIyAgICAgICAgICAgICAgIH1cbiMgICAgICAgICAgICAgfVxuIyAgICAgICAgICAgfVxuXG4jICAgICAgICAgfSB3aGlsZSAoIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nICk7XG4jICAgICAgIH1cblxuIyAgICAgICAvLyBUaW1lIHRvIHJlbW92ZSB0aG9zZSBlbGVtZW50cyFcbiMgICAgICAgcmVtb3ZlLmxlbmd0aCAmJiAkKHJlbW92ZSkucmVtb3ZlKCk7XG4jICAgICB9KTtcbiMgICB9O1xuXG4jIH0pKGpRdWVyeSk7XG4jIGBcblxuIl19