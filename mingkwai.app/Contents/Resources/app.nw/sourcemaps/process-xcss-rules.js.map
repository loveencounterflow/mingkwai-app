{"version":3,"sources":["process-xcss-rules.coffee"],"names":[],"mappings":"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","file":"process-xcss-rules.js","sourceRoot":"/source/","sourcesContent":["\n\n############################################################################################################\n# njs_path                  = require 'path'\n# njs_fs                    = require 'fs-extra'\n# join                      = njs_path.join\n#...........................................................................................................\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'MKTS/mingkwai-styles-fix'\nwarn                      = CND.get_logger 'warn',    badge\nhelp                      = CND.get_logger 'help',    badge\ndebug                     = CND.get_logger 'debug',    badge\ninfo                      = CND.get_logger 'info',    badge\n#...........................................................................................................\n### TAINT selectors not properly ordered ###\nxcss_rules                = require './xcss-rules'\n\n#-----------------------------------------------------------------------------------------------------------\nhandler_by_properties =\n\n  #---------------------------------------------------------------------------------------------------------\n  '-mkts-draggable': ( rule ) ->\n    { media, selectors, property, value, } = rule\n    unless value is 'xy'\n      throw new Error \"unknown value for xCSS property #{property}: #{value}\"\n    for selector in selectors\n      targets = $ selector\n      targets.draggable()\n      help \"found #{targets.length} targets for `#{selector} { #{property}: #{value}; }`\"\n\n  #---------------------------------------------------------------------------------------------------------\n  '-mkts-columns': ( rule ) ->\n    { media, selectors, property, value, } = rule\n    unless value in [ 'all', '1', ]\n      throw new Error \"unknown value for xCSS property #{property}: #{value}\"\n    debug '©zpmvr', rule\n\n  #---------------------------------------------------------------------------------------------------------\n  '-mkts-foobar': ( rule ) ->\n    { selectors, property, value, } = rule\n    debug '©uhbsC', rule\n\n#-----------------------------------------------------------------------------------------------------------\n( $ 'document' ).ready =>\n  # ( $ '.draggable' ).draggable()\n  for rule in xcss_rules[ 'rules' ]\n    { property, } = rule\n    if ( handler = handler_by_properties[ property ] )?\n      handler rule\n    else\n      warn \"no handler for xCSS property #{rpr property}; skipping\"\n  #.........................................................................................................\n\n\n  #=========================================================================================================\n  # TOOL ACTIONS\n  #---------------------------------------------------------------------------------------------------------\n  ### Although not strictly xCSS rules, we process behaviors that rely on tag names (rather than\n  style names used in names) right here. ###\n  #.........................................................................................................\n  # ( $ 'document' ).on 'mousemove', ( event ) ->\n  #   debug '©YC6EG', [ event.pageX, event.pageY, ]\n  #   window[ 'app' ][ 'mouse-position' ] = [ event.pageX, event.pageY, ]\n  #.........................................................................................................\n  ( $ 'i' ).on 'mouseover', ( event ) ->\n    ( $ @ ).switchClass 'small', 'medium'\n  #.........................................................................................................\n  ( $ 'i' ).on 'mouseout', ( event ) ->\n    ( $ @ ).switchClass 'medium', 'small'\n  #.........................................................................................................\n  ( $ 'tool, i' ).on 'click', ( event ) ->\n    if ( action = ( $ @ ).attr 'action' )?\n      if ( method = window[ 'app' ]?[ 'MKTS' ]?[ 'ACTIONS' ]?[ action ] )?\n        help \"clicked on tool; action #{rpr action}\"\n        method()\n      else\n        warn \"unknown action #{rpr action}\"\n    else\n      warn \"`<tool>` tag without `action` attribute\"\n    #.......................................................................................................\n    return false\n\n\n\n\n\n\n\n"]}